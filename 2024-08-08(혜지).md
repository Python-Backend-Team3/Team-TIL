# ✍️ 8월 8일 회고 내용

## 📌 오늘 학습한 내용
오늘은 **[단일 행 함수, 집계 함수, 조인, 서브쿼리, DML]** 까지 진도를 나갔다.

5개의 내용 중 어렵다고 느꼈던 **조인, 서브쿼리**을 간단히 정리할 생각이다.
<br><br/>

## 📌 조인
### 1. 조인의 개념

- 여러 개의 테이블을 마치 하나의 테이블인 것처럼 사용하여 데이터를 검색하는 방법
  
- **표현방식** : 2가지 방식이 있다.
  1. **ANSI SQL 조인방식**

     from절에 있는 두 테이블명 사이에 JOIN 키워드를 넣어준다.

      조인에 대한 조건은 ON절에 작성하고 나머지 조건은 WHERE절에 작성한다.

     ```
     select *
     from 테이블A join 테이블B
     on 조인_조건
     where 기타_조건;
     ```
  
  2. **Non-ANSI SQL 조인 방식**

     테이블을 쉼표로 구분하여 from절에 작성한다.

     조인 조건과 기타 조건을 구분하지 않고 모두 where절에 기술한다.

     ```
     select *
     from 테이블A, 테이블B
     where 조인_조건 및 기타_조건;
     ```
 
  
    
### 2. 실습 ERD

- 테이블 간의 관계를 설명해주는 다이어그램으로 데이터베이스의 구조를 한눈에 파악 가능하다.


### 3. 조인의 종류
  - **크로스 조인**
    - 한쪽 테이블의 행에 다른 쪽 테이블의 모든 행을 조인한다.
    - 크로스 조인의 결과 행의 개수는 테이블A 행의 개수 X 테이블B 행의 개수이다.
      
  - **내부 조인**
    - 각 테이블에서 조인 조건에 일치되는 데이터만 가져오는 조인이다.
    - 각 테이블에 데이터가 있어야한다.
    
  - **외부 조인**
    - 한쪽 테이블에 데이터가 없어도 데이터가 있는 쪽의 테이블을 기준으로 하여 데이터를 출력할 때 쓰는 조인이다.
      
  - **셀프 조인**
    - 동일한 테이블 내에서 한 컬럼이 다른 컬럼을 참조하는 조인으로 이때 테이블명을 별명으로 지정하여 다른 테이블인 것처럼 사용한다.
    - 한 행에 있는 값을 같은 행에 있는 다른 값과 비교해야할 때 주로 사용한다.
<br><br/>

## 📌 서브쿼리
### 1. 서브쿼리의 개념
- SQL문 내부에서 사용하는 select문
  
- 일반적으로 서브쿼리가 먼저 실행된 후 메인쿼리가 실행된다.

### 2. 반환 값에 따른 서브쿼리
- **단일행 서브쿼리**
  - 서브쿼리의 결과로 단일 행을 반환한다.
  - 단일행 비교 연산자(=, <, <=, >=, <> 등)를 사용하여 메인 쿼리와 서브 쿼리를 연결한다.
       
- **복수행 서브쿼리**
  - 서브쿼리의 결과로 여러 행이 나온다.
  - 복수행 비교 연산자(in, any, some, all, exists)를 사용하여 메인 쿼리와 서브 쿼리를 연결한다.


### 3. 사용 위치에 따른 서브쿼리
- **조건절에서 사용하는 서브쿼리**
  - 일반적으로 조건절에서 사용한다.
  
- **from절에서 사용하는 서브쿼리**
  - from절에서 서브쿼리를 사용하는 것을 인라인 뷰라고 부른다.
  - 이때, 뷰에는 반드시 별명을 지정해야하며 테이블명처럼 사용가능하다.
  
- **select절에서 사용하는 서브쿼리**
  - 쿼리를 실행하여 반환되는 값은 메인 쿼리에서 사용된다.
  - 만약 서브쿼리의 결과로 행을 0개 반환하면 메인 쿼리의 결과는 null이고, 행이 2개 이상 반환되면 오류가 발생한다.

### 4. 상관 서브쿼리와 다중 컬럼 서브쿼리
- **상관 서브쿼리**
  - 메인 쿼리와 서브쿼리 간의 상관관계를 포함하는 형태의 쿼리다.
  - 상관 서브쿼리는 메인 쿼리를 한 행씩 처리하며 이때 연관이 있는 컬럼을 기준으로 서브쿼리에서 값을 찾는다.
  - 이로 인해 데이터가 많아지면 속도가 느려질 수 있으니 주의한다.
    
- **다중 컬럼 서브쿼리**
  - 서브쿼리에서 여러 개의 컬럼을 사용하여 다중 비교를 하는 쿼리다.

    즉, 서브쿼리의 결과로 나오는 여러 칼럼을 메인 쿼리의 값과 비교하여 결과를 출력한다.
<br><br/>



