

## 기능 구현

### 1. 프로필 조회 및 수정 기능
- **사용 클래스**: `generics.RetrieveUpdateAPIView`
  - 클래스를 사용하여 프로필의 **읽기**와 **수정** 기능을 구

## 요구되는 권한 설정

### 1. 프로필 조회 (읽기)
- **요구 권한**: 모든 사용자 (인증 여부와 관계없이 접근 가능)
- `AllowAny` 권한 클래스를 사용하여 설정할 수 있다.

### 2. 프로필 수정
- **요구 권한**: 해당 프로필의 소유자만 수정 가능
  - `permission_classes` 필드를 설정하여 구현할 수 있다.
  - 사용자가 프로필의 소유자인지 확인하는 권한 클래스를 직접 작성하거나, DRF에서 제공하는 기본 권한 클래스를 사용할 수 있다.

## API 별 권한 설정

- **권한이 미리 조합된 클래스 활용**:
  - DRF는 여러 권한을 조합한 클래스를 제공하므로, 이를 활용하여 API 별로 필요한 권한을 설정할 수 있다.

- **직접 권한 클래스 작성**:
  - 필요에 따라 직접 권한 클래스를 작성하여 특정 조건에 따라 권한을 부여할 수 있다.

## Django Rest Framework에서 제공하는 권한 클래스 예시

- `AllowAny`: 모든 요청을 통과시킴. 인증이 불필요하며, 모든 사용자가 접근할 수 있다.
- `IsAuthenticated`: 인증된 사용자만 요청을 통과시킴. 선언된 인증 방법을 통해 인증된 사용자만 접근 가능
- `IsAdminUser`: 관리자인 경우에만 요청을 통과시킴. 관리자로 설정된 사용자만 접근할 수 있다.


# Django Admin 페이지에 User와 Profile 모델 함께 등록하기

Django 관리자(Admin) 페이지에서 `User` 모델만 등록하면 `Profile` 모델이 나타나지 않아 불편함이 있다.
하지만, `User` 모델과 `Profile` 모델을 함께 등록하여 동일한 모델인 것처럼 관리할 수 있는 방법이 있다.


# 게시글 기능 정리

- 게시글 생성
- 게시글 1개 가져오기
- 게시글 목록 가져오기(가져오는 개수 제한하기)
- 게시글 수정하기
- 게시글 삭제하기
- 게시글 좋아요 기능
- 게시글 필터링(좋아요 누른 글/내가 작성한 글)
- 게시글 각 기능마다 권한 설정

#### 모델의 필드 구성
- 저자
- 저자 프로필
- 제목
- 카테고리
- 본문
- 이미지 → 이미지가 없을 때는 `default.png` 파일 표시
- 좋아요 누른 사람들 → 다대다(ManyToMany)
- 글이 올라간 시간

#### 게시글 기능

##### PostSerializer()
- 게시글에 대한 모든 정보를 JSON으로 변환하여 전달하는 역할을 수행
- profile 필드를 작성하지 않으면 `profile` 필드에는`profile`의 `PK` 값만 나타나므로 `ProfileSerializer`를 포함하도록 하며, `Nested Serializer`라고 함

##### PostCreateSerializer()
- 게시물을 등록할 때 유저는 제목, 카테고리, 본문, 이미지 등만 입력함
- 나머지는 시스템이 알아서 채워주거나 빈칸으로 남겨둠
- 시리얼라이저는 유저가 입력한 데이터를 검증하고 Django 데이터로 변환하여 저장하게 하는 역할을 수행

### Views(CRUD) + 권한
- 게시글은 모든 `CRUD` 기능이 포함되어 있으므로 `ViewSet`을 사용하여 쉽게 적용 가능함
- 단, 각기 다른 시리얼라이저를 적재적소에 활용하도록 코드를 작성해야 함
- 게시글 생성 시 유저가 입력해 주지 않는 저자 정보를 같이 넣을 수 있도록 함

- 요구되는 권한
  - 게시글의 조회: 모든 사람
  - 게시글의 생성: 인증된 유저만 가능
  - 게시글의 수정/삭제: 해당 글의 작성자만 가능
- User에서의 `CustomReadOnly`와 다른 점
  - 각 객체별 권한 뿐만 아니라 전체 객체에 대한 권한도 포함해야 함(목록 조회/생성)
    - `has_permission()`을 함께 구현

